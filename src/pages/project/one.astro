---
    import "../../styles/project.scss";
    import BaseComponent from "../../components/base.astro";
    import DemoImage from "/assets/image/demo.png";
---

<BaseComponent>
    <article class="project">
        <section class="main">
            <h1 class="main__title">Lorem ipsum dolor sit, amet.</h1>
            <img class="main__img" src={DemoImage} alt="project">
        </section>
        
        <section class="details">
            <div class="details__content">
                <h1 class="details__title">Lorem ipsum</h1>
                
                <div class="details__container">
                    <div class="left">
                        <ul class="left__links">
                            <li><a href="#">Visitar Sitio</a></li>
                            <li><a href="#">Ver codigo</a></li>
                        </ul>
                        <ul class="left__client">
                            <li class="left__title">Cliente</li>
                            <li>lorem Ipsum</li>
                        </ul>
                        <ul class="left__tecno">
                            <li class="left__title">Tecnologias</li>
                            <li>lorem Ipsum</li>
                            <li>lorem</li>
                            <li>lem</li>
                            <li>Ipsum</li>
                        </ul>
                    </div>
                    <div class="right">
                        <h2 class="right__subtitle">Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque officia repellendus quia esse et omnis.</h2>
                        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Itaque consectetur dolorum aut nisi officiis, quos nihil quidem facere temporibus alias quia, vel veritatis quaerat ab.</p>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Dicta non asperiores eius saepe modi tenetur aut accusantium deserunt cum consectetur assumenda animi possimus hic provident libero, accusamus reiciendis praesentium ad?</p>
                    </div>
                </div>

            </div>
        </section>

        <section class="tousers">
            <div class="tousers__content">
                <img class="tousers__demovideo" src={DemoImage} alt="project">
                <div class="tousers__paragraph">
                    <h1>Lorem ipsum dolor sit amet.</h1>
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Perspiciatis voluptate recusandae voluptatibus ratione nulla illo dolorum, provident labore in quasi!lorem50 et ipsum dolor sit amet consectetur adipis</p>
                </div>
            </div>
        </section>

        <section class="tousers">
            <img class="tousers__fullscreen" src={DemoImage} alt="project">
            <div class="tousers__content">
                <div class="tousers__paragraph">
                    <h1>Lorem ipsum dolor sit amet.</h1>
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Perspiciatis voluptate recusandae voluptatibus ratione nulla illo dolorum, provident labore in quasi!</p>
                </div>
                <img class="tousers__demovideo" src={DemoImage} alt="project">
                <div class="tousers__paragraph" >
                    <h1>Lorem ipsum dolor sit amet.</h1>
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Perspiciatis voluptate recusandae voluptatibus ratione nulla illo dolorum, provident labore in quasi!lorem50 et ipsum dolor sit amet consectetur adipis</p>
                </div>
            </div>
        </section>

        <section class="next">
        <div class="next__content">
            <div class="next__text">
                <span class="next__siguiente">Siguiente</span>
                <span class="next__nombre">Lorem, ipsum dolor.</span>
            </div>
            <img class="next__demo" src={DemoImage} alt="project">
        </div>
        </section>
    </article>
    <script>
        window.onload = () => {
            window.addEventListener("scroll", () => {

                const MAX = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                if(Math.round(window.scrollY) == MAX) {
                    setTimeout(() => {
                        document.location.href = "/project/two";
                        console.log("cambio!");
                    }, 300);
                }

                // calculando el 15% final del scroll de la pagina
                // el scale de la imagen
                const next__img = document.querySelector(".next__demo");
                const partial = MAX - (MAX * 15 / 100);
                // se activa cuando el scroll alcanza el 90%
                if(Math.round(window.scrollY) >= Math.round(partial)){
                    let scale = (window.scrollY / 3000) - 0.02;
                    next__img.style.transform = "scale("+ scale +")";
                }
            });

            // AÃ±ade clase a main image para que cargue
            const mainimage = document.querySelector('.main__img');
            const maintext = document.querySelector('.main__title');
            console.log(maintext);
            mainimage.classList.add('main__img--fadein');
            setTimeout(() => {
                console.log(maintext, "asdasdasdasd");
                maintext.classList.add('main__title--fadeinleft');
            }, 250);
        }
    </script>
</BaseComponent>